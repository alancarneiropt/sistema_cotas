{% extends 'raffles/base_admin.html' %}
{% load static %}

{% block title %}
  Perfil - Sistema de Cotas
{% endblock %}

{% block page_title %}
  <i class="bi bi-person me-2"></i>
  Meu Perfil
{% endblock %}

{% block content %}
  <div class="row g-4">
    <!-- Profile Card -->
    <div class="col-lg-4">
      <div class="card">
        <div class="card-header">
          <h5 class="mb-0">
            <i class="bi bi-person-circle me-2"></i>
            Informações do Usuário
          </h5>
        </div>
        <div class="card-body text-center">
          <div class="user-avatar mx-auto mb-3" style="width: 100px; height: 100px; font-size: 2.5rem;">
            {{ user.first_name|first|default:user.username|first|upper }}
          </div>
          <h4 class="mb-1">{{ user.first_name|default:user.username }}</h4>
          <p class="text-muted mb-3">{{ user.email|default:"Sem e-mail" }}</p>
          
          <div class="row text-center">
            <div class="col-6">
              <div class="border-end">
                <h5 class="mb-0">{{ user.date_joined|date:"Y" }}</h5>
                <small class="text-muted">Membro desde</small>
              </div>
            </div>
            <div class="col-6">
              <h5 class="mb-0">{{ user.last_login|date:"d/m/Y" }}</h5>
              <small class="text-muted">Último acesso</small>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- User Details -->
    <div class="col-lg-8">
      <div class="card">
        <div class="card-header">
          <h5 class="mb-0">
            <i class="bi bi-gear me-2"></i>
            Detalhes da Conta
          </h5>
        </div>
        <div class="card-body">
          <div class="row g-3">
            <div class="col-md-6">
              <label class="form-label">Nome de Usuário</label>
              <input type="text" class="form-control" value="{{ user.username }}" readonly>
            </div>
            <div class="col-md-6">
              <label class="form-label">E-mail</label>
              <input type="email" class="form-control" value="{{ user.email|default:'Não informado' }}" readonly>
            </div>
            <div class="col-md-6">
              <label class="form-label">Primeiro Nome</label>
              <input type="text" class="form-control" value="{{ user.first_name|default:'Não informado' }}" readonly>
            </div>
            <div class="col-md-6">
              <label class="form-label">Sobrenome</label>
              <input type="text" class="form-control" value="{{ user.last_name|default:'Não informado' }}" readonly>
            </div>
            <div class="col-md-6">
              <label class="form-label">É Staff</label>
              <div class="form-control">
                {% if user.is_staff %}
                  <span class="badge bg-success">Sim</span>
                {% else %}
                  <span class="badge bg-danger">Não</span>
                {% endif %}
              </div>
            </div>
            <div class="col-md-6">
              <label class="form-label">É Superuser</label>
              <div class="form-control">
                {% if user.is_superuser %}
                  <span class="badge bg-success">Sim</span>
                {% else %}
                  <span class="badge bg-danger">Não</span>
                {% endif %}
              </div>
            </div>
            <div class="col-md-6">
              <label class="form-label">Conta Ativa</label>
              <div class="form-control">
                {% if user.is_active %}
                  <span class="badge bg-success">Sim</span>
                {% else %}
                  <span class="badge bg-danger">Não</span>
                {% endif %}
              </div>
            </div>
            <div class="col-md-6">
              <label class="form-label">Data de Criação</label>
              <input type="text" class="form-control" value="{{ user.date_joined|date:'d/m/Y H:i' }}" readonly>
            </div>
          </div>
          
          <hr class="my-4">
          
          <div class="d-flex gap-2">
            <a href="/admin/auth/user/{{ user.id }}/change/" class="btn btn-primary">
              <i class="bi bi-pencil me-2"></i>
              Editar no Django Admin
            </a>
            <a href="/admin/password_change/" class="btn btn-outline-secondary">
              <i class="bi bi-key me-2"></i>
              Alterar Senha
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- System Info -->
  <div class="row g-4 mt-2">
    <div class="col-12">
      <div class="card">
        <div class="card-header">
          <h5 class="mb-0">
            <i class="bi bi-info-circle me-2"></i>
            Informações do Sistema
          </h5>
        </div>
        <div class="card-body">
          <div class="row g-3">
            <div class="col-md-3">
              <div class="text-center p-3 border rounded">
                <i class="bi bi-shield-check display-4 text-success mb-2"></i>
                <h6>Sistema de Cotas</h6>
                <small class="text-muted">Versão 1.0</small>
              </div>
            </div>
            <div class="col-md-3">
              <div class="text-center p-3 border rounded">
                <i class="bi bi-gear display-4 text-primary mb-2"></i>
                <h6>Django</h6>
                <small class="text-muted">Framework Web</small>
              </div>
            </div>
            <div class="col-md-3">
              <div class="text-center p-3 border rounded">
                <i class="bi bi-database display-4 text-info mb-2"></i>
                <h6>Banco de Dados</h6>
                <small class="text-muted">SQLite/PostgreSQL</small>
              </div>
            </div>
            <div class="col-md-3">
              <div class="text-center p-3 border rounded">
                <i class="bi bi-globe display-4 text-warning mb-2"></i>
                <h6>Interface</h6>
                <small class="text-muted">Bootstrap 5</small>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
{% endblock %}

{% block extra_css %}
<style>
  .form-control[readonly] {
    background-color: #f8f9fa;
    border-color: #e9ecef;
  }
  
  .border-end {
    border-right: 1px solid #dee2e6 !important;
  }
</style>
{% endblock %}
